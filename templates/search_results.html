
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search Results</title>
    
    <style>
    body {
        font-family: Arial, sans-serif;
        background-color: #f4f4f4;
        margin: 0;
        padding: 0;
    }

    /* .navbar {
        background-color: #333;
        overflow: hidden;
    }

    .navbar a {
        float: left;
        display: block;
        color: #f2f2f2;
        text-align: center;
        padding: 14px 20px;
        text-decoration: none;
    }

    .navbar a:hover {
        background-color: #ddd;
        color: black;
    } */

    .navbar {
    background-color: #f8f9fa; /* Light gray background */
    padding: 10px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1); /* Shadow effect */
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.navbar-brand {
    font-size: 24px;
    text-decoration: none;
    color: #333;
    font-weight: bold;
}

.navbar-item {
    margin-left: 20px;
    text-decoration: none;
    color: #555;
    transition: color 0.3s ease;
}

.navbar-item:hover {
    color: #007bff; /* Blue on hover */
}

.search_form {
    display: flex;
    align-items: center;
    margin-left: auto;
}

.search_form input[type="text"] {
    padding: 8px;
    border: 1px solid #ddd;
    border-radius: 5px;
    margin-right: 5px;
}

.search_form button {
    background-color: #007bff; /* Blue search button */
    border: none;
    color: #fff;
    padding: 8px 12px;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.3s ease;
}

.search_form button:hover {
    background-color: #0056b3; /* Darker blue on hover */
}

    .container {
        max-width: 800px;
        margin: 20px auto;
        padding: 20px;
        background-color: #fff;
        border-radius: 5px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    h1 {
        color: #333;
        margin-bottom: 20px;
        text-align: center;
    }

    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
    }

    th, td {
        border: 1px solid #ddd;
        padding: 8px;
        text-align: left;
    }

    th {
        background-color: #f2f2f2;
        font-weight: bold;
    }

    tr:nth-child(even) {
        background-color: #f9f9f9;
    }

    tr:hover {
        background-color: #f2f2f2;
    }

    /* .search_form {
        margin-top: 20px;
        text-align: center;
    }

    .search_form input[type="text"] {
        padding: 8px;
        border-radius: 5px;
        border: 1px solid #ccc;
    }

    .search_form button {
        padding: 8px 12px;
        border-radius: 5px;
        border: none;
        background-color: #333;
        color: #fff;
        cursor: pointer;
    }

    .search_form button:hover {
        background-color: #555;
    } */

    .add-form {
        margin-top: 20px;
        background-color: #f2f2f2;
        padding: 20px;
        border-radius: 5px;
    }

    .form-group {
        margin-bottom: 10px;
    }

    .form-group label {
        font-weight: bold;
    }

    .form-group input[type="text"] {
        padding: 8px;
        border-radius: 5px;
        border: 1px solid #ccc;
        width: 100%;
    }

    .add-form button {
        padding: 8px 12px;
        border-radius: 5px;
        border: none;
        background-color: #333;
        color: #fff;
        cursor: pointer;
    }

    .add-form button:hover {
        background-color: #555;
    }
</style>
</head>
<body>
    <div class="navbar">
        <a href="{{ url_for('home') }}" class="navbar-brand">Home</a>
        <a href="{{ url_for('enternew') }}" class="navbar-item">View Products</a>
        <a href="{{ url_for('list') }}" class="navbar-item">View Cart</a>
        <form action="/search" method="POST" class="search_form">
            <input type="text" name="search_query" placeholder="Enter search query">
            <button type="submit"><i class="fa-solid fa-magnifying-glass"></i></button>
        </form>
    </div>
    <div class="container">
        <h1>Search Results</h1>
        <table border="1px">
            <thead>
                <td><strong>Product Name</strong></td>
                <td><strong>Price($)</strong></td>
                <td><strong>Add to Cart</strong></td> 
            </thead>
            {% for row in rows %}
            <tr>
                <td>{{ row["product_nm"] }}</td>
                <td>{{ row["product_prc"] }}</td>
                <td>
                    <div class="product" data-name="{{ row['product_nm'] }}" data-price="{{ row['product_prc'] }}">
                        <button class="add-to-cart" data-name="{{ row['product_nm'] }}" data-price="{{ row['product_prc'] }}">Add to Cart</button>
                    </div>
                </td>
            </tr>
            {% endfor %}
        </table>
        
    </div>
    <!-- <form action="{{ url_for('addrec') }}" method="POST" class="add-form">
        <h3>Enter product details</h3>
        <div class="form-group">
            <label for="nm">Name:</label><br>
            <input type="text" id="nm" name="nm">
        </div>
        <div class="form-group">
            <label for="price">Price:</label><br>
            <input type="text" id="price" name="price">
        </div>
        <button type="submit">Add to Cart</button>
    </form> -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
    const addToCartButtons = document.querySelectorAll('.add-to-cart');
    
    addToCartButtons.forEach(button => {
        button.addEventListener('click', function() {
            const name = this.getAttribute('data-name');
            const price = parseFloat(this.getAttribute('data-price'));
            
            addToCart(name, price);
        });
    });
});

function addToCart(name, price) {
    fetch('/add_to_cart', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({
            name: name,
            price: price
        })
    })
    .then(response => {
        if (response.ok) {
            alert('Item added to cart successfully!');
        } else {
            throw new Error('Failed to add item to cart');
        }
    })
    .catch(error => {
        console.error('Error:', error);
    });
}

    </script>
</body>
</html>
